(function(){"use strict";var t={30:function(t,e,o){var l=o(9242),n=o(3396),a=o.p+"img/WEHI_logo.273fc6ad.png";const i=(0,n._)("img",{alt:"Vue logo",src:a},null,-1);function r(t,e,o,l,a,r){const s=(0,n.up)("HelloWorld");return(0,n.wg)(),(0,n.iD)(n.HY,null,[i,(0,n.Wm)(s,{msg:"WEHI RCP Customised Platform"})],64)}var s=o(7139);const u=t=>((0,n.dD)("data-v-7121d910"),t=t(),(0,n.Cn)(),t),c={class:"hello"},d=u((()=>(0,n._)("p",null,[(0,n.Uk)(" This page contains user-friendly workflows on some common image analyses. "),(0,n._)("br"),(0,n.Uk)(" Simply click the workflow that you would like to perform and upload images with the required format. "),(0,n._)("br"),(0,n._)("br"),(0,n.Uk)(" If you want to upload a job, please follow this API format. "),(0,n._)("br")],-1))),f={class:"workflow-selection"},g=u((()=>(0,n._)("option",{disabled:"",value:""},"Please select a workflow",-1))),w=u((()=>(0,n._)("option",{value:"workflow1"},"Normalize Histogram",-1))),h=u((()=>(0,n._)("option",{value:"workflow2"},"HDAB Counts",-1))),p=u((()=>(0,n._)("option",{value:"workflow3"},"[+ Customised job]",-1))),m=[g,w,h,p],b=u((()=>(0,n._)("br",null,null,-1))),_=u((()=>(0,n._)("label",{for:"fileUpload",class:"custom-file-upload"}," Click here to upload files ",-1))),v=u((()=>(0,n._)("br",null,null,-1))),k={class:"section-box"},y=u((()=>(0,n._)("h3",{class:"section-title"},"Output",-1))),D={class:"output-image-container"},H={key:0,class:"loading-indicator"},j={key:1,class:"image-wrapper"},W=["src"],I={key:2},S=u((()=>(0,n._)("h3",null,"State Status",-1))),U=u((()=>(0,n._)("br",null,null,-1))),x={key:3},C=u((()=>(0,n._)("br",null,null,-1))),O=u((()=>(0,n._)("br",null,null,-1))),z={class:"section-box jobs-box"},T=u((()=>(0,n._)("h3",{class:"section-title"},"Jobs",-1))),E={key:0},A=u((()=>(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"Job ID"),(0,n._)("th",null,"Partition"),(0,n._)("th",null,"Name"),(0,n._)("th",null,"User"),(0,n._)("th",null,"Status"),(0,n._)("th",null,"Memory"),(0,n._)("th",null,"Time"),(0,n._)("th",null,"Nodes")])],-1))),P=(0,n.uE)('<h3 data-v-7121d910>References</h3><ul data-v-7121d910><li data-v-7121d910><a href="https://training.galaxyproject.org/training-material/topics/imaging/tutorials/imaging-introduction/tutorial.html" target="_blank" rel="noopener" data-v-7121d910>galaxy-tutorial</a></li><li data-v-7121d910><a href="https://bioblend.readthedocs.io/en/latest/" target="_blank" rel="noopener" data-v-7121d910>bioblend</a></li></ul><h3 data-v-7121d910>Directories</h3><ul data-v-7121d910><li data-v-7121d910><a href="https://github.com/WEHI-ResearchComputing" target="_blank" rel="noopener" data-v-7121d910>WEHI-Research-Computing</a></li><li data-v-7121d910><a href="https://github.com/WEHI-ResearchComputing/Imaging-Getting-Started" target="_blank" rel="noopener" data-v-7121d910>Imaging-Project</a></li><li data-v-7121d910><a href="https://github.com/WEHI-ResearchComputing/Imaging-Getting-Started/wiki/Technical-Notes" target="_blank" rel="noopener" data-v-7121d910>Technical-Notes</a></li><li data-v-7121d910><a href="https://github.com/WEHI-ResearchComputing/Imaging-Getting-Started/wiki/High%E2%80%90level-Architecture" target="_blank" rel="noopener" data-v-7121d910>Architecture</a></li></ul>',4);function J(t,e,o,a,i,r){return(0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("h1",null,(0,s.zw)(o.msg),1),d,(0,n._)("div",f,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.selectedWorkflow=t)},m,512),[[l.bM,i.selectedWorkflow]]),(0,n._)("button",{onClick:e[1]||(e[1]=(...t)=>r.executeWorkflow&&r.executeWorkflow(...t))},"Execute Workflow")]),b,(0,n._)("div",null,[(0,n._)("input",{type:"file",id:"fileUpload",onChange:e[2]||(e[2]=(...t)=>r.handleFiles&&r.handleFiles(...t)),accept:"image/jpeg, image/png, image/tiff",style:{display:"none"}},null,32),_]),v,(0,n._)("div",k,[y,(0,n._)("div",D,[i.isLoading?((0,n.wg)(),(0,n.iD)("h4",H," Loading... ")):i.wf1convertedImageUrl?((0,n.wg)(),(0,n.iD)("div",j,[(0,n._)("img",{src:i.wf1convertedImageUrl,alt:"Output Image",class:"output-image"},null,8,W)])):(0,n.kq)("",!0),i.wf1stateTimes&&Object.keys(i.wf1stateTimes).length>0?((0,n.wg)(),(0,n.iD)("div",I,[S,(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.wf1stateTimes,((t,e)=>((0,n.wg)(),(0,n.iD)("li",{key:e},[(0,n.Uk)((0,s.zw)(e)+": "+(0,s.zw)(t)+" seconds",1),U])))),128))])])):(0,n.kq)("",!0),null!==i.wf2Hcount&&null!==i.wf2DABcount?((0,n.wg)(),(0,n.iD)("div",x,[(0,n._)("p",null,"Hcount: "+(0,s.zw)(i.wf2Hcount),1),(0,n._)("p",null,"DABcount: "+(0,s.zw)(i.wf2DABcount),1)])):(0,n.kq)("",!0)])]),C,(0,n._)("button",{onClick:e[3]||(e[3]=(...t)=>r.viewJobs&&r.viewJobs(...t)),class:"view-jobs-button"},"View Jobs"),O,(0,n._)("div",z,[T,i.displayJobs?((0,n.wg)(),(0,n.iD)("table",E,[A,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.jobStatus,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.job_id},[(0,n._)("td",null,(0,s.zw)(t.job_id),1),(0,n._)("td",null,(0,s.zw)(t.partition),1),(0,n._)("td",null,(0,s.zw)(t.name),1),(0,n._)("td",null,(0,s.zw)(t.user),1),(0,n._)("td",null,(0,s.zw)(t.status),1),(0,n._)("td",null,(0,s.zw)(t.memory),1),(0,n._)("td",null,(0,s.zw)(t.time),1),(0,n._)("td",null,(0,s.zw)(t.nodes),1)])))),128))])])):(0,n.kq)("",!0)]),P])}var F=o(4161),B=o(8291),R={name:"HelloWorld",props:{msg:String},data(){return{selectedWorkflow:"",isLoading:!1,uploadedFiles:null,wf1stateTimes:null,wf1imageUrl:null,wf1convertedImageUrl:null,wf2Hcount:null,wf2DABcount:null,jobStatus:[],displayJobs:!1}},methods:{handleFiles(t){this.uploadedFiles=t.target.files},async executeWorkflow(){if(!this.selectedWorkflow||!this.uploadedFiles)return void alert("Please select a workflow and upload files");const t=new FormData;for(let o=0;o<this.uploadedFiles.length;o++)t.append("files",this.uploadedFiles[o]);t.append("workflow",this.selectedWorkflow),this.isLoading=!0;try{const e=await F.Z.post("http://127.0.0.1:5000/response",t);if(this.isLoading=!1,console.log(e.data),"workflow1"==this.selectedWorkflow){this.wf1stateTimes=e.data.state_times,console.log(this.wf1stateTimes),this.wf1imageUrl=e.data.output_path,console.log(this.wf1imageUrl);const t=await B.ZP.load(this.wf1imageUrl),o=await t.toDataURL("image/png");this.wf1convertedImageUrl=o}"workflow2"==this.selectedWorkflow&&(this.wf2Hcount=e.data.Hcount,this.wf2DABcount=e.data.DABcount,console.log(this.wf2Hcount),console.log(this.wf2DABcount))}catch(e){console.error("Error uploading files:",e)}},async viewJobs(){await this.fetchJobStatus(),this.displayJobs=!0},async fetchJobStatus(){try{const t=await F.Z.get("http://127.0.0.1:5000/squeue");this.jobStatus=t.data}catch(t){console.error("Error fetching job status:",t)}}}},q=o(89);const L=(0,q.Z)(R,[["render",J],["__scopeId","data-v-7121d910"]]);var M=L,N={name:"App",components:{HelloWorld:M}};const Z=(0,q.Z)(N,[["render",r]]);var G=Z;(0,l.ri)(G).mount("#app")}},e={};function o(l){var n=e[l];if(void 0!==n)return n.exports;var a=e[l]={exports:{}};return t[l].call(a.exports,a,a.exports,o),a.exports}o.m=t,function(){var t=[];o.O=function(e,l,n,a){if(!l){var i=1/0;for(c=0;c<t.length;c++){l=t[c][0],n=t[c][1],a=t[c][2];for(var r=!0,s=0;s<l.length;s++)(!1&a||i>=a)&&Object.keys(o.O).every((function(t){return o.O[t](l[s])}))?l.splice(s--,1):(r=!1,a<i&&(i=a));if(r){t.splice(c--,1);var u=n();void 0!==u&&(e=u)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[l,n,a]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var l in e)o.o(e,l)&&!o.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:e[l]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,l){var n,a,i=l[0],r=l[1],s=l[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(n in r)o.o(r,n)&&(o.m[n]=r[n]);if(s)var c=s(o)}for(e&&e(l);u<i.length;u++)a=i[u],o.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return o.O(c)},l=self["webpackChunkgalaxy_web"]=self["webpackChunkgalaxy_web"]||[];l.forEach(e.bind(null,0)),l.push=e.bind(null,l.push.bind(l))}();var l=o.O(void 0,[998],(function(){return o(30)}));l=o.O(l)})();
//# sourceMappingURL=app.16131394.js.map