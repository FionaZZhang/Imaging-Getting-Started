(function(){"use strict";var t={5111:function(t,e,l){var o=l(9242),a=l(3396),n=l.p+"img/WEHI_logo.273fc6ad.png";const i=(0,a._)("img",{alt:"Vue logo",src:n},null,-1);function r(t,e,l,o,n,r){const s=(0,a.up)("HelloWorld");return(0,a.wg)(),(0,a.iD)(a.HY,null,[i,(0,a.Wm)(s,{msg:"WEHI RCP Customised Galaxy GUI"})],64)}var s=l(7139);const u=t=>((0,a.dD)("data-v-6c852b3a"),t=t(),(0,a.Cn)(),t),c={class:"hello"},d=u((()=>(0,a._)("p",null,[(0,a.Uk)(" This page contains user-friendly workflows on some common image analyses using Galaxy. "),(0,a._)("br"),(0,a.Uk)(" Simply click the workflow that you would like to perform and upload images with the required format. "),(0,a._)("br")],-1))),f={class:"workflow-selection"},g=u((()=>(0,a._)("option",{disabled:"",value:""},"Please select a workflow",-1))),w=u((()=>(0,a._)("option",{value:"workflow1"},"Normalize Histogram",-1))),h=u((()=>(0,a._)("option",{value:"workflow2"},"HDAB Counts",-1))),p=u((()=>(0,a._)("option",{value:"workflow3"},"Segmentation",-1))),b=[g,w,h,p],m=u((()=>(0,a._)("br",null,null,-1))),_=u((()=>(0,a._)("label",{for:"fileUpload",class:"custom-file-upload"}," Click here to Upload Images ",-1))),v=u((()=>(0,a._)("br",null,null,-1))),k={class:"section-box"},y=u((()=>(0,a._)("h3",{class:"section-title"},"Output",-1))),D={class:"output-image-container"},H={key:0,class:"loading-indicator"},W={key:1,class:"image-wrapper"},j=["src"],I={key:2},S=u((()=>(0,a._)("h3",null,"State Status",-1))),x=u((()=>(0,a._)("br",null,null,-1))),U={key:3},O=u((()=>(0,a._)("br",null,null,-1))),C=u((()=>(0,a._)("br",null,null,-1))),z={class:"section-box jobs-box"},T=u((()=>(0,a._)("h3",{class:"section-title"},"Jobs",-1))),E={key:0},A=u((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Job ID"),(0,a._)("th",null,"Partition"),(0,a._)("th",null,"Name"),(0,a._)("th",null,"User"),(0,a._)("th",null,"Status"),(0,a._)("th",null,"Memory"),(0,a._)("th",null,"Time"),(0,a._)("th",null,"Nodes")])],-1))),J=(0,a.uE)('<h3 data-v-6c852b3a>References</h3><ul data-v-6c852b3a><li data-v-6c852b3a><a href="https://training.galaxyproject.org/training-material/topics/imaging/tutorials/imaging-introduction/tutorial.html" target="_blank" rel="noopener" data-v-6c852b3a>galaxy-tutorial</a></li><li data-v-6c852b3a><a href="https://bioblend.readthedocs.io/en/latest/" target="_blank" rel="noopener" data-v-6c852b3a>bioblend</a></li></ul><h3 data-v-6c852b3a>Directories</h3><ul data-v-6c852b3a><li data-v-6c852b3a><a href="https://github.com/WEHI-ResearchComputing" target="_blank" rel="noopener" data-v-6c852b3a>WEHI-Research-Computing</a></li><li data-v-6c852b3a><a href="https://github.com/WEHI-ResearchComputing/Imaging-Getting-Started" target="_blank" rel="noopener" data-v-6c852b3a>Imaging-Project</a></li><li data-v-6c852b3a><a href="https://github.com/WEHI-ResearchComputing/Imaging-Getting-Started/wiki/Technical-Notes" target="_blank" rel="noopener" data-v-6c852b3a>Technical-Notes</a></li><li data-v-6c852b3a><a href="https://github.com/WEHI-ResearchComputing/Imaging-Getting-Started/wiki/High%E2%80%90level-Architecture" target="_blank" rel="noopener" data-v-6c852b3a>Architecture</a></li></ul>',4);function F(t,e,l,n,i,r){return(0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("h1",null,(0,s.zw)(l.msg),1),d,(0,a._)("div",f,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.selectedWorkflow=t)},b,512),[[o.bM,i.selectedWorkflow]]),(0,a._)("button",{onClick:e[1]||(e[1]=(...t)=>r.executeWorkflow&&r.executeWorkflow(...t))},"Execute Workflow")]),m,(0,a._)("div",null,[(0,a._)("input",{type:"file",id:"fileUpload",onChange:e[2]||(e[2]=(...t)=>r.handleFiles&&r.handleFiles(...t)),accept:"image/jpeg, image/png, image/tiff",style:{display:"none"}},null,32),_]),v,(0,a._)("div",k,[y,(0,a._)("div",D,[i.isLoading?((0,a.wg)(),(0,a.iD)("h4",H," Loading... ")):i.wf1convertedImageUrl?((0,a.wg)(),(0,a.iD)("div",W,[(0,a._)("img",{src:i.wf1convertedImageUrl,alt:"Output Image",class:"output-image"},null,8,j)])):(0,a.kq)("",!0),i.wf1stateTimes&&Object.keys(i.wf1stateTimes).length>0?((0,a.wg)(),(0,a.iD)("div",I,[S,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.wf1stateTimes,((t,e)=>((0,a.wg)(),(0,a.iD)("li",{key:e},[(0,a.Uk)((0,s.zw)(e)+": "+(0,s.zw)(t)+" seconds",1),x])))),128))])])):(0,a.kq)("",!0),null!==i.wf2Hcount&&null!==i.wf2DABcount?((0,a.wg)(),(0,a.iD)("div",U,[(0,a._)("p",null,"Hcount: "+(0,s.zw)(i.wf2Hcount),1),(0,a._)("p",null,"DABcount: "+(0,s.zw)(i.wf2DABcount),1)])):(0,a.kq)("",!0)])]),O,(0,a._)("button",{onClick:e[3]||(e[3]=(...t)=>r.viewJobs&&r.viewJobs(...t)),class:"view-jobs-button"},"View Jobs"),C,(0,a._)("div",z,[T,i.displayJobs?((0,a.wg)(),(0,a.iD)("table",E,[A,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.jobStatus,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.job_id},[(0,a._)("td",null,(0,s.zw)(t.job_id),1),(0,a._)("td",null,(0,s.zw)(t.partition),1),(0,a._)("td",null,(0,s.zw)(t.name),1),(0,a._)("td",null,(0,s.zw)(t.user),1),(0,a._)("td",null,(0,s.zw)(t.status),1),(0,a._)("td",null,(0,s.zw)(t.memory),1),(0,a._)("td",null,(0,s.zw)(t.time),1),(0,a._)("td",null,(0,s.zw)(t.nodes),1)])))),128))])])):(0,a.kq)("",!0)]),J])}var P=l(4161),B=l(8291),R={name:"HelloWorld",props:{msg:String},data(){return{selectedWorkflow:"",isLoading:!1,uploadedFiles:null,wf1stateTimes:null,wf1imageUrl:null,wf1convertedImageUrl:null,wf2Hcount:null,wf2DABcount:null,jobStatus:[],displayJobs:!1}},methods:{handleFiles(t){this.uploadedFiles=t.target.files},async executeWorkflow(){if(!this.selectedWorkflow||!this.uploadedFiles)return void alert("Please select a workflow and upload files");const t=new FormData;for(let l=0;l<this.uploadedFiles.length;l++)t.append("files",this.uploadedFiles[l]);t.append("workflow",this.selectedWorkflow),this.isLoading=!0;try{const e=await P.Z.post("http://127.0.0.1:5000/response",t);if(this.isLoading=!1,console.log(e.data),"workflow1"==this.selectedWorkflow){this.wf1stateTimes=e.data.state_times,console.log(this.wf1stateTimes),this.wf1imageUrl=e.data.output_path,console.log(this.wf1imageUrl);const t=await B.ZP.load(this.wf1imageUrl),l=await t.toDataURL("image/png");this.wf1convertedImageUrl=l}"workflow2"==this.selectedWorkflow&&(this.wf2Hcount=e.data.Hcount,this.wf2DABcount=e.data.DABcount,console.log(this.wf2Hcount),console.log(this.wf2DABcount))}catch(e){console.error("Error uploading files:",e)}},async viewJobs(){await this.fetchJobStatus(),this.displayJobs=!0},async fetchJobStatus(){try{const t=await P.Z.get("http://127.0.0.1:5000/squeue");this.jobStatus=t.data}catch(t){console.error("Error fetching job status:",t)}}}},q=l(89);const G=(0,q.Z)(R,[["render",F],["__scopeId","data-v-6c852b3a"]]);var L=G,M={name:"App",components:{HelloWorld:L}};const N=(0,q.Z)(M,[["render",r]]);var Z=N;(0,o.ri)(Z).mount("#app")}},e={};function l(o){var a=e[o];if(void 0!==a)return a.exports;var n=e[o]={exports:{}};return t[o].call(n.exports,n,n.exports,l),n.exports}l.m=t,function(){var t=[];l.O=function(e,o,a,n){if(!o){var i=1/0;for(c=0;c<t.length;c++){o=t[c][0],a=t[c][1],n=t[c][2];for(var r=!0,s=0;s<o.length;s++)(!1&n||i>=n)&&Object.keys(l.O).every((function(t){return l.O[t](o[s])}))?o.splice(s--,1):(r=!1,n<i&&(i=n));if(r){t.splice(c--,1);var u=a();void 0!==u&&(e=u)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[o,a,n]}}(),function(){l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,{a:e}),e}}(),function(){l.d=function(t,e){for(var o in e)l.o(e,o)&&!l.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){l.p="/"}(),function(){var t={143:0};l.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,n,i=o[0],r=o[1],s=o[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(a in r)l.o(r,a)&&(l.m[a]=r[a]);if(s)var c=s(l)}for(e&&e(o);u<i.length;u++)n=i[u],l.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return l.O(c)},o=self["webpackChunkgalaxy_web"]=self["webpackChunkgalaxy_web"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=l.O(void 0,[998],(function(){return l(5111)}));o=l.O(o)})();
//# sourceMappingURL=app.b22eccbf.js.map